<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Digital Comics - Home</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #121212; color: white; margin: 0; padding: 20px; }
        nav { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 20px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; }
        .card { background: #1e1e1e; border-radius: 8px; padding: 15px; text-align: center; border: 1px solid #333; }
        .card img { width: 100%; border-radius: 4px; height: 250px; object-fit: cover; }
        .btn { background: #ff4757; color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer; text-decoration: none; }
        .hidden { display: none; }
    </style>
</head>
<body>

    <nav>
        <h1>The Digital Comics</h1>
        <div id="nav-links">
            <a href="register.html" class="btn">Register</a>
        </div>
    </nav>

    <section id="welcome-section">
        <h2>Welcome to the Collection</h2>
        <p>Sign in to see your friends and saved comics.</p>
    </section>

    <section>
        <h3>Explore Comics</h3>
        <div id="comic-list" class="grid">
            <p>Loading comics...</p>
        </div>
    </section>

    <script>
        const API_URL = "https://script.google.com/macros/s/AKfycbylqJN-EqPA5OdneyONuGEe1Dt6FPx_Qtf9evwUkDndUubinmfh0dACRtiVRT0ykI1K9A/exec";
        const ORIGIN = "https://seigh-sword.github.io/The-Digital-comics/";

        // 1. Fetch Comics from your "Comics" tab
        async function loadComics() {
            try {
                const response = await fetch(`${API_URL}?origin=${encodeURIComponent(ORIGIN)}&tab=Comics`);
                const comics = await response.json();
                
                const container = document.getElementById('comic-list');
                container.innerHTML = ''; // Clear loading text

                if (comics.length === 0) {
                    container.innerHTML = '<p>No comics found in the database yet!</p>';
                    return;
                }

                comics.forEach(comic => {
                    container.innerHTML += `
                        <div class="card">
                            <img src="${comic.imageurl || 'https://via.placeholder.com/200x250'}" alt="Cover">
                            <h4>${comic.title}</h4>
                            <p>By: ${comic.author}</p>
                            <a href="comic.html?id=${comic.id}" class="btn">Read Now</a>
                        </div>
                    `;
                });
            } catch (error) {
                console.error("Error loading comics:", error);
                document.getElementById('comic-list').innerHTML = '<p>Failed to load comics. Check your console.</p>';
            }
        }

        // Run on page load
        loadComics();
    </script>
</body>
</html>
